{{ 'hotspots.css' | asset_url | stylesheet_tag }}

<section class="custom-hotspots-section">
  <div class="custom-hotspots-background" style="background-image: url('{{ section.settings.background_image | img_url: 'master' }}');">
    <div class="custom-hotspots-content">
      {% if section.settings.title != blank %}
        <h2 class="section-{{ section.id }}-title" style="
          top: {{ section.settings.title_position_top }}%;
          left: {{ section.settings.title_position_left }}%;
          font-size: {{ section.settings.title_font_size }}px;
          color: {{ section.settings.title_color }};
          position: absolute; /* Ensuring absolute positioning */
        ">
          {{ section.settings.title }}
        </h2>
      {% endif %}
      {% if section.settings.description != blank %}
        <p class="section-{{ section.id }}-description" style="
          top: {{ section.settings.description_position_top }}%;
          left: {{ section.settings.description_position_left }}%;
          font-size: {{ section.settings.description_font_size }}px;
          color: {{ section.settings.description_color }};
          position: absolute; /* Ensuring absolute positioning */
        ">
          {{ section.settings.description }}
        </p>
      {% endif %}
      {% if section.settings.cta_link != blank %}
        <a href="{{ section.settings.cta_link }}" class="cta-button section-{{ section.id }}-button" style="
          top: {{ section.settings.button_position_top }}%;
          left: {{ section.settings.button_position_left }}%;
          background-color: {{ section.settings.button_background_color }};
          color: {{ section.settings.button_text_color }};
          border-radius: {{ section.settings.button_border_radius }}px;
          position: absolute; /* Ensuring absolute positioning */
        ">
          {{ section.settings.cta_text }}
        </a>
      {% endif %}
    </div>

    <div class="hotspots-container">
      {% for hotspot in section.blocks %}
        <div class="hotspot" style="top: {{ hotspot.settings.position_top }}%; left: {{ hotspot.settings.position_left }}%;">
          <div class="hotspot-icon">
            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.5 4V11M4 7.5H11M7.5 14.5C3.63401 14.5 0.5 11.366 0.5 7.5C0.5 3.63401 3.63401 0.5 7.5 0.5C11.366 0.5 14.5 3.63401 14.5 7.5C14.5 11.366 11.366 14.5 7.5 14.5Z" stroke="#000000"></path>
            </svg>
          </div>
          <div class="hotspot-popup">
            <h3>{{ hotspot.settings.title }}</h3>
            <p>{{ hotspot.settings.description }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{%- style -%}
  .section-{{ section.id }}-title {
    /* Position and other styles have already been applied inline */
  }

  .section-{{ section.id }}-description {
    /* Position and other styles have already been applied inline */
  }

  .section-{{ section.id }}-button {
    /* Position and other styles have already been applied inline */
  }

  @media screen and (max-width: 768px) {
    .section-{{ section.id }}-title,
    .section-{{ section.id }}-description,
    .section-{{ section.id }}-button {
      font-size: 14px;
    }
  }
{%- endstyle -%}




{% schema %}
{
  "name": "Custom Hotspots Section",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "title_position_top",
      "label": "Title Position Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 10
    },
    {
      "type": "range",
      "id": "title_position_left",
      "label": "Title Position Left",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 10
    },
    {
      "type": "range",
      "id": "title_font_size",
      "label": "Title Font Size",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 24
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "description_position_top",
      "label": "Description Position Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 20
    },
    {
      "type": "range",
      "id": "description_position_left",
      "label": "Description Position Left",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 10
    },
    {
      "type": "range",
      "id": "description_font_size",
      "label": "Description Font Size",
      "min": 10,
      "max": 100,
      "step": 1,
      "default": 14
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Link"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "label": "Button Border Radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "button_position_top",
      "label": "Button Position Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 30
    },
    {
      "type": "range",
      "id": "button_position_left",
      "label": "Button Position Left",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 10
    }
  ],
  "blocks": [
    {
      "type": "hotspot",
      "name": "Hotspot",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Hotspot Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Hotspot Description"
        },
        {
          "type": "range",
          "id": "position_top",
          "label": "Position Top",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "position_left",
          "label": "Position Left",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Hotspots Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
